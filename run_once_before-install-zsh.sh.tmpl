#!/usr/bin/env sh
# Installs zsh and makes it the login shell.

set -eu

if ! command -v zsh >/dev/null 2>&1; then
  {{- if eq .chezmoi.os "darwin" }}
  brew install zsh                   # macOS
  {{- else if eq .chezmoi.os "linux" }}
  if   command -v apt-get >/dev/null 2>&1; then sudo apt-get update && sudo apt-get install -y zsh
  elif command -v dnf     >/dev/null 2>&1; then sudo dnf install -y zsh
  elif command -v pacman  >/dev/null 2>&1; then sudo pacman -Sy --noconfirm zsh
  fi
  {{- end }}
fi

# Set zsh as default shell (if not already):
if [ "$SHELL" != "$(command -v zsh)" ]; then
  chsh -s "$(command -v zsh)" "$USER"
fi

